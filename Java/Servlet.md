# 서블릿

- 서블릿 : 웹애플리케이션을 만들 때 필요한 인터페이스

초창기 어플리케이션에서는 정적데이터만 제공할 수 있었다.

이를 해결하기 위해 CGI(Common gate interface)라는 것이 등장했다. 이는 동적데이터를 전송하기 위한 규약을 말한다.

 CGI는 몇가지 문제가 있었는데, 모든 사용자 요청마다 프로세스를 사용해서 요청을 처리했고, 이는 곧 서버의 많은 리소스를 차지하는 문제를 야기했다. 또다른 문제로 같은 요청이 와도 동일한 CGI 구현체를 만들게 되는 구조를 가지고 있었다. 이러한 문제를 해결하기 위해서 서블릿이 등장하게 됐다.

서블릿은 자바진영에서 동적데이터를 제공하기 위해서 CGI를 기반으로 제작된 프로그램이다.

서블릿은 Process를 Thread로, 동일 구현체 생성을 싱글톤 패턴으로 적용하여 CGI의 문제를 해결했다.

**서블릿을 사용함으로 개발자의 이점은 HTTP 통신에서 메시지 파싱을 API를 통해서 도와준다는 점이다.**

서블릿은 누가 생성하는 것인가?

서블릿 컨테이너(톰캣)라는 녀석인데, 서블릿은 생성시 init(), 제거시 destory()를 사용하면서 생성과 삭제가 되는데, 서블릿 컨테이너는 이것을 담당하면서 서블릿의 생명 주기를 담당한다.

1. 클라이언트 요청이 오면 서블릿 컨테이너는 해당 요청과 매핑된 서블릿을 가지는 작업을 한다.
2. 서블릿이 생성되어 있지 않다면 생성 이후에 1번작업을 실행한다.
3. 그 후 서블릿은 서블릿 컨테이너 안에 존재하게 된다.
4. 또다시 같은 매핑되어 있는 요청이 온다면 서블릿 컨테이너 안에 있는 서블릿을 재사용한다.
5. 종료되는 시점은 보통 컨테이너가 종료되는 시점이며, 특정 서블릿이 로드, 언로드 될때이다.

서블릿의 문제점

서블릿은 각 요청마다 새로이 서블릿 객체가 생성되기 때문에 10개의 요청이 있다면 10개의 서블릿이 생성된다.

그렇게 될 경우 핵심 비즈니스 로직이 매번 반복돼서 수행되는 경우가 있었다.

그래서 공통로직을 앞단에서 걸러주는 방식을 생각하게 된다. 이를 바로 Front Controller pattern라고 한다.

프론트컨트롤러 패턴을 통해서 하나의 서블릿을 통해서 요청을 처리할 수 있었고, 이를 통해 관리가 쉬워진다.